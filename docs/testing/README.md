# Emdash æµ‹è¯•æ–‡æ¡£ä¸­å¿ƒ

> **æœ€åæ›´æ–°**: 2025-11-07
> **æ–‡æ¡£ç‰ˆæœ¬**: 1.0

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### æ ¸å¿ƒæ–‡æ¡£

| æ–‡æ¡£ | æè¿° | é€‚ç”¨äººå‘˜ | é“¾æ¥ |
|------|------|----------|------|
| **å•å…ƒæµ‹è¯•è¦†ç›–æ–‡æ¡£** | è¯¦ç»†çš„å•å…ƒæµ‹è¯•è®¾è®¡ã€ä¼˜å…ˆçº§ã€Mockç­–ç•¥ | æ‰€æœ‰å¼€å‘è€… | [UNIT_TEST_COVERAGE.md](../UNIT_TEST_COVERAGE.md) |
| **CIæµ‹è¯•è¦†ç›–æ–‡æ¡£** | CI/CDæµæ°´çº¿é…ç½®ã€è·¨å¹³å°æµ‹è¯•ã€æ€§èƒ½ä¼˜åŒ– | DevOpsã€Tech Lead | [CI_TEST_COVERAGE.md](../CI_TEST_COVERAGE.md) |
| **æµ‹è¯•è·Ÿè¸ªæ€»è§ˆ** | è¿›åº¦çœ‹æ¿ã€ä»»åŠ¡åˆ†é…ã€é£é™©ç®¡ç†ã€æŒ‡æ ‡è¿½è¸ª | æ‰€æœ‰äºº | [TEST_TRACKING.md](../TEST_TRACKING.md) |

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### æˆ‘æ˜¯æ–°åŠ å…¥çš„å¼€å‘è€…

1. **äº†è§£ç°çŠ¶**: é˜…è¯» [TEST_TRACKING.md](../TEST_TRACKING.md) ç¬¬1-2èŠ‚
2. **è®¤é¢†ä»»åŠ¡**: æŸ¥çœ‹ [TEST_TRACKING.md](../TEST_TRACKING.md) ç¬¬3èŠ‚æ‰¾åˆ°æœªåˆ†é…çš„æ¨¡å—
3. **å­¦ä¹ æµ‹è¯•ç¼–å†™**: é˜…è¯» [UNIT_TEST_COVERAGE.md](../UNIT_TEST_COVERAGE.md) ç¬¬7èŠ‚
4. **å¼€å§‹ç¼–å†™**: é€‰æ‹©ä¸€ä¸ªP0æ¨¡å—å¼€å§‹

### æˆ‘è¦å†™ç¬¬ä¸€ä¸ªæµ‹è¯•

```bash
# 1. æŸ¥çœ‹æµ‹è¯•è®¡åˆ’
open docs/UNIT_TEST_COVERAGE.md

# 2. é€‰æ‹©ä¸€ä¸ªæ¨¡å— (å»ºè®®ä»ç®€å•çš„å¼€å§‹ï¼Œå¦‚GitService)
# 3. åˆ›å»ºæµ‹è¯•æ–‡ä»¶
mkdir -p src/test/main
touch src/test/main/GitService.test.ts

# 4. å‚è€ƒæ¨¡æ¿ç¼–å†™æµ‹è¯• (è§UNIT_TEST_COVERAGE.md ç¬¬3.4èŠ‚)

# 5. è¿è¡Œæµ‹è¯•
npm test

# 6. æŸ¥çœ‹è¦†ç›–ç‡
npm run test:coverage
```

### æˆ‘è¦é…ç½®CI

1. **é˜…è¯»CIæ–‡æ¡£**: [CI_TEST_COVERAGE.md](../CI_TEST_COVERAGE.md)
2. **æŒ‰å‘¨å®æ–½**:
   - ç¬¬1å‘¨: ç¬¬8.1èŠ‚ - åŸºç¡€æµ‹è¯•é›†æˆ
   - ç¬¬2å‘¨: ç¬¬8.2èŠ‚ - æµ‹è¯•é—¨ç¦
   - ç¬¬3å‘¨: ç¬¬8.3èŠ‚ - ä¼˜åŒ–å’Œç›‘æ§

### æˆ‘è¦æŸ¥çœ‹è¿›åº¦

æ‰“å¼€ [TEST_TRACKING.md](../TEST_TRACKING.md)ï¼ŒæŸ¥çœ‹ï¼š
- ç¬¬2èŠ‚: æµ‹è¯•è¦†ç›–ç‡çœ‹æ¿ (å¯è§†åŒ–è¿›åº¦)
- ç¬¬3èŠ‚: æ¨¡å—æµ‹è¯•çŠ¶æ€ (è¯¦ç»†ä»»åŠ¡åˆ—è¡¨)
- ç¬¬4èŠ‚: æµ‹è¯•å®æ–½è¿›åº¦ (æŒ‰å‘¨è®¡åˆ’)

---

## ğŸ“Š å½“å‰çŠ¶æ€æ¦‚è§ˆ

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  æ•´ä½“æµ‹è¯•è¦†ç›–ç‡:  ~8% / ç›®æ ‡ 70%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æ ¸å¿ƒæ¨¡å— (P0):     â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1/5  (20%) (CodexService âœ…)
é‡è¦æœåŠ¡ (P1):     â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0/7  (0%)
IPCå±‚ (P2):        â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1/12 (8%)
Hooks (P3):        â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 1/15 (7%)

CIé›†æˆ:            âŒ æœªé…ç½®
æµ‹è¯•é—¨ç¦:          âŒ æœªå¯ç”¨
æ–‡æ¡£å®Œæ•´æ€§:        âœ… 100%
```

**ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘**: 2025-11-14 (å®Œæˆç¬¬1å‘¨åŸºç¡€è®¾æ–½)

---

## ğŸš€ å…³é”®é‡Œç¨‹ç¢‘

| æ—¥æœŸ | é‡Œç¨‹ç¢‘ | çŠ¶æ€ |
|------|--------|------|
| 2025-11-07 | âœ… æµ‹è¯•æ–‡æ¡£å®Œæˆ | **å®Œæˆ** |
| 2025-11-08 | âš™ï¸ CodexServiceæµ‹è¯• (25ç”¨ä¾‹, ~75%è¦†ç›–) | éƒ¨åˆ†å®Œæˆ |
| 2025-11-14 | ğŸ¯ CIæµ‹è¯•é›†æˆ | å¾…å¼€å§‹ |
| 2025-11-21 | ğŸ¯ P0æ¨¡å—æµ‹è¯•å®Œæˆ (CodexService, WorktreeService, DatabaseService) | è¿›è¡Œä¸­ (CodexService âœ…) |
| 2025-11-28 | ğŸ¯ P1æ¨¡å—æµ‹è¯•å®Œæˆ (GitService, ptyManager, LinearService, JiraService) | å¾…å¼€å§‹ |
| 2025-12-05 | ğŸ¯ 50%è¦†ç›–ç‡è¾¾æˆ | å¾…å¼€å§‹ |
| 2025-12-19 | ğŸ¯ 70%è¦†ç›–ç‡è¾¾æˆ | å¾…å¼€å§‹ |

---

## ğŸ” æŒ‰è§’è‰²æŸ¥æ‰¾

### å¼€å‘è€… (Developer)

**æˆ‘è¦å†™æµ‹è¯•**:
- â†’ [UNIT_TEST_COVERAGE.md ç¬¬7èŠ‚: æµ‹è¯•ç¼–å†™æŒ‡å—](../UNIT_TEST_COVERAGE.md#7-æµ‹è¯•ç¼–å†™æŒ‡å—)
- â†’ [UNIT_TEST_COVERAGE.md ç¬¬8èŠ‚: Mockç­–ç•¥](../UNIT_TEST_COVERAGE.md#8-mockç­–ç•¥)

**æˆ‘è¦æŸ¥çœ‹æˆ‘è´Ÿè´£çš„æ¨¡å—**:
- â†’ [TEST_TRACKING.md ç¬¬3èŠ‚: æ¨¡å—æµ‹è¯•çŠ¶æ€](../TEST_TRACKING.md#3-æ¨¡å—æµ‹è¯•çŠ¶æ€)

**æˆ‘è¦æäº¤PR**:
- â†’ [TEST_TRACKING.md ç¬¬6.2èŠ‚: è´¨é‡é—¨ç¦](../TEST_TRACKING.md#62-è´¨é‡é—¨ç¦)

### Tech Lead

**åˆ¶å®šæµ‹è¯•ç­–ç•¥**:
- â†’ [UNIT_TEST_COVERAGE.md ç¬¬6èŠ‚: æµ‹è¯•ä¼˜å…ˆçº§çŸ©é˜µ](../UNIT_TEST_COVERAGE.md#6-æµ‹è¯•ä¼˜å…ˆçº§çŸ©é˜µ)
- â†’ [TEST_TRACKING.md ç¬¬5èŠ‚: å·²çŸ¥é—®é¢˜å’Œé£é™©](../TEST_TRACKING.md#5-å·²çŸ¥é—®é¢˜å’Œé£é™©)

**åˆ†é…ä»»åŠ¡**:
- â†’ [TEST_TRACKING.md ç¬¬8èŠ‚: è´£ä»»åˆ†é…çŸ©é˜µ (RACI)](../TEST_TRACKING.md#8-è´£ä»»åˆ†é…çŸ©é˜µ-raci)

**è¿½è¸ªè¿›åº¦**:
- â†’ [TEST_TRACKING.md ç¬¬6èŠ‚: æµ‹è¯•è´¨é‡æŒ‡æ ‡](../TEST_TRACKING.md#6-æµ‹è¯•è´¨é‡æŒ‡æ ‡)

### DevOps

**é…ç½®CI**:
- â†’ [CI_TEST_COVERAGE.md ç¬¬3èŠ‚: CIæµ‹è¯•æ”¹è¿›æ–¹æ¡ˆ](../CI_TEST_COVERAGE.md#3-ciæµ‹è¯•æ”¹è¿›æ–¹æ¡ˆ)
- â†’ [CI_TEST_COVERAGE.md ç¬¬8èŠ‚: å®æ–½è®¡åˆ’](../CI_TEST_COVERAGE.md#8-å®æ–½è®¡åˆ’)

**ä¼˜åŒ–æ€§èƒ½**:
- â†’ [CI_TEST_COVERAGE.md ç¬¬6èŠ‚: æ€§èƒ½å’Œç¼“å­˜ä¼˜åŒ–](../CI_TEST_COVERAGE.md#6-æ€§èƒ½å’Œç¼“å­˜ä¼˜åŒ–)

**å¤„ç†å¤±è´¥**:
- â†’ [CI_TEST_COVERAGE.md ç¬¬7èŠ‚: å¤±è´¥å¤„ç†å’Œé€šçŸ¥](../CI_TEST_COVERAGE.md#7-å¤±è´¥å¤„ç†å’Œé€šçŸ¥)

### QA

**åˆ¶å®šæµ‹è¯•è®¡åˆ’**:
- â†’ [UNIT_TEST_COVERAGE.md å…¨æ–‡](../UNIT_TEST_COVERAGE.md)

**Reviewæµ‹è¯•è´¨é‡**:
- â†’ [TEST_TRACKING.md é™„å½•B: æµ‹è¯•Reviewæ¸…å•](../TEST_TRACKING.md#b-æµ‹è¯•reviewæ¸…å•)

---

## ğŸ“– æŒ‰ä»»åŠ¡æŸ¥æ‰¾

### ä»»åŠ¡: ä¿®å¤Linté”™è¯¯

**ç›®æ ‡**: å¯ç”¨CIä¸­çš„lintæ£€æŸ¥

**æ­¥éª¤**:
1. è¿è¡Œ `npm run lint`
2. ä¿®å¤æ‰€æœ‰é”™è¯¯
3. æäº¤PR
4. å‚è€ƒ: [CI_TEST_COVERAGE.md ç¬¬8.1èŠ‚](../CI_TEST_COVERAGE.md#81-ç¬¬1å‘¨åŸºç¡€æµ‹è¯•é›†æˆ)

### ä»»åŠ¡: ç¼–å†™CodexServiceæµ‹è¯•

**ç›®æ ‡**: å®ç°CodexServiceçš„å®Œæ•´æµ‹è¯•è¦†ç›–

**æ­¥éª¤**:
1. é˜…è¯»: [UNIT_TEST_COVERAGE.md ç¬¬3.1èŠ‚](../UNIT_TEST_COVERAGE.md#31-codexservice-p0---æœ€é«˜ä¼˜å…ˆçº§)
2. åˆ›å»ºæ–‡ä»¶: `src/test/main/CodexService.test.ts`
3. å®ç°200+æµ‹è¯•ç”¨ä¾‹
4. è¾¾åˆ°90%+è¦†ç›–ç‡
5. æäº¤PR

**é¢„è®¡æ—¶é—´**: 4-5å¤©

### ä»»åŠ¡: é…ç½®test.yml workflow

**ç›®æ ‡**: åˆ›å»ºç»Ÿä¸€çš„æµ‹è¯•æµæ°´çº¿

**æ­¥éª¤**:
1. é˜…è¯»: [CI_TEST_COVERAGE.md ç¬¬3.1èŠ‚](../CI_TEST_COVERAGE.md#31-æ–°å¢-testyml-æ ¸å¿ƒæµ‹è¯•æµæ°´çº¿)
2. åˆ›å»ºæ–‡ä»¶: `.github/workflows/test.yml`
3. æœ¬åœ°éªŒè¯: `act -j test`
4. æäº¤PR

**é¢„è®¡æ—¶é—´**: 2å°æ—¶

### ä»»åŠ¡: æ›´æ–°READMEæ·»åŠ æµ‹è¯•badge

**ç›®æ ‡**: åœ¨READMEä¸­å±•ç¤ºæµ‹è¯•çŠ¶æ€

**æ­¥éª¤**:
```markdown
# åœ¨README.mdé¡¶éƒ¨æ·»åŠ 
[![Tests](https://github.com/generalaction/emdash/workflows/Test/badge.svg)](https://github.com/generalaction/emdash/actions)
[![Coverage](https://codecov.io/gh/generalaction/emdash/branch/main/graph/badge.svg)](https://codecov.io/gh/generalaction/emdash)
```

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Ÿ

```bash
npx vitest run CodexService.test.ts
```

### Q: å¦‚ä½•åªè¿è¡ŒæŸä¸€ä¸ªdescribeå—ï¼Ÿ

```typescript
describe.only('CodexService', () => {
  // åªè¿è¡Œè¿™ä¸ªå—
});
```

### Q: æµ‹è¯•å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ

1. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
2. æœ¬åœ°å¤ç°: `npm test`
3. æ£€æŸ¥æ˜¯å¦æ˜¯flaky test (é‡æ–°è¿è¡Œ)
4. æŸ¥çœ‹CIæ—¥å¿—
5. å‚è€ƒ: [CI_TEST_COVERAGE.md é™„å½•C: CIæ•…éšœæ’æŸ¥æ¸…å•](../CI_TEST_COVERAGE.md#c-ciæ•…éšœæ’æŸ¥æ¸…å•)

### Q: å¦‚ä½•æé«˜æµ‹è¯•è¦†ç›–ç‡ï¼Ÿ

1. è¿è¡Œ: `npm run test:coverage`
2. æ‰“å¼€: `coverage/index.html` æŸ¥çœ‹æœªè¦†ç›–çš„è¡Œ
3. ä¸ºæœªè¦†ç›–çš„ä»£ç è¡¥å……æµ‹è¯•
4. å‚è€ƒ: [UNIT_TEST_COVERAGE.md ç¬¬3èŠ‚](../UNIT_TEST_COVERAGE.md#3-ä¸»è¿›ç¨‹-main-process-æµ‹è¯•è®¡åˆ’)

### Q: æµ‹è¯•å¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ

1. ä½¿ç”¨å¹¶è¡ŒåŒ–: `vitest run --threads --maxThreads=4`
2. ä½¿ç”¨watchæ¨¡å¼: `vitest watch` (åªè¿è¡Œç›¸å…³æµ‹è¯•)
3. å‚è€ƒ: [CI_TEST_COVERAGE.md ç¬¬6èŠ‚: æ€§èƒ½ä¼˜åŒ–](../CI_TEST_COVERAGE.md#6-æ€§èƒ½å’Œç¼“å­˜ä¼˜åŒ–)

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [Vitestå®˜æ–¹æ–‡æ¡£](https://vitest.dev/)
- [GitHub Actionsæ–‡æ¡£](https://docs.github.com/en/actions)
- [Testing Best Practices](https://kentcdodds.com/blog/common-mistakes-with-react-testing-library)
- [Test Pyramid](https://martinfowler.com/articles/practical-test-pyramid.html)

---

## ğŸ“ è”ç³»å’Œåé¦ˆ

- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/generalaction/emdash/issues)
- **æ–‡æ¡£æ›´æ–°**: æäº¤PRåˆ° `docs/` ç›®å½•
- **æŠ€æœ¯è®¨è®º**: [Discord](https://discord.gg/UmTn6Nb7)

---

## ğŸ“ å˜æ›´æ—¥å¿—

| æ—¥æœŸ | å˜æ›´ | ä½œè€… |
|------|------|------|
| 2025-11-07 | åˆå§‹ç‰ˆæœ¬ï¼Œ3ä»½æ ¸å¿ƒæ–‡æ¡£å®Œæˆ | Claude |

---

**ä¸‹æ¬¡æ›´æ–°**: 2025-11-14 (ç¬¬1å‘¨ç»“æŸå)
